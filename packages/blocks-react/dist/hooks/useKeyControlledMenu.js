"use strict";var _slicedToArray=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_react=require("react"),_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function useKeyControlledMenu(e){function t(e){if("Tab"===e.key&&u)i(!1);else if(-1<["ArrowDown"," "].indexOf(e.key)&&!u)e.preventDefault(),i(!0);else{-1<["ArrowDown","ArrowUp","Enter"," "].indexOf(e.key)&&e.preventDefault();var r=s(e.key);console.log(r),l(r)}}function n(e){-1<["Enter"," "].indexOf(e.key)||"Escape"===e.key&&i(!1)}var o=e.ref,r=e.menuLength,u=e.visible,i=e.setVisible,a=(0,_react.useState)(-1),c=_slicedToArray(a,2),f=c[0],l=c[1],s=function(e){return"ArrowDown"===e?Math.min(f+1,r-1):"ArrowUp"===e?Math.max(f-1,0):f};return(0,_react.useEffect)(function(){if(o.current&&(o.current.addEventListener("keydown",t),o.current.addEventListener("keyup",n),u))for(var e=0;e<o.current.childNodes.length;e++){var r=o.current.childNodes[e];if("function"==typeof r.focus){r.focus();break}}return function(){o.current.removeEventListener("keydown",t),o.current.removeEventListener("keyup",n)}}),{focusIdx:f,setFocusIdx:l}}module.exports=useKeyControlledMenu;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvb2tzL3VzZUtleUNvbnRyb2xsZWRNZW51LmpzeCJdLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwidXNlS2V5Q29udHJvbGxlZE1lbnUiLCJfcmVmIiwib25LZXlEb3duIiwiZSIsImtleSIsInZpc2libGUiLCJzZXRWaXNpYmxlIiwiaW5kZXhPZiIsInByZXZlbnREZWZhdWx0IiwidGVzdCIsImdldEZvY3VzSW5kZXhBZnRlcktleVByZXNzIiwiY29uc29sZSIsImxvZyIsInNldEZvY3VzSWR4Iiwib25LZXlVcCIsInJlZiIsIm1lbnVMZW5ndGgiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheSIsImZvY3VzSWR4Iiwia2V5TmFtZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImkiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwiY2hpbGQiLCJmb2N1cyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiNGFBQUFBLE9BQUFDLFFBQUEsd0hBRUEsU0FBU0MscUJBQVRDLEdBR29CLFNBQVpDLEVBQWFDLEdBQ2pCLEdBQWMsUUFBVkEsRUFBRUMsS0FBaUJDLEVBQ3JCQyxHQUFXLFFBQ04sSUFBeUMsRUFBckMsQ0FBQyxZQUFhLEtBQUtDLFFBQVFKLEVBQUVDLE9BQWNDLEVBQ3BERixFQUFFSyxpQkFDRkYsR0FBVyxPQUNOLEVBQ3dELEVBQXpELENBQUMsWUFBYSxVQUFXLFFBQVMsS0FBS0MsUUFBUUosRUFBRUMsTUFBV0QsRUFBRUssaUJBQ2xFLElBQUlDLEVBQU9DLEVBQTJCUCxFQUFFQyxLQUN4Q08sUUFBUUMsSUFBSUgsR0FDWkksRUFBWUosSUFJQSxTQUFWSyxFQUFXWCxJQUNzQixFQUFqQyxDQUFDLFFBQVMsS0FBS0ksUUFBUUosRUFBRUMsTUFFUixXQUFWRCxFQUFFQyxLQUNYRSxHQUFXLEdBckJ1RCxJQUF4Q1MsRUFBd0NkLEVBQXhDYyxJQUFLQyxFQUFtQ2YsRUFBbkNlLFdBQVlYLEVBQXVCSixFQUF2QkksUUFBU0MsRUFBY0wsRUFBZEssV0FBY1csR0FDdEMsRUFBQW5CLE9BQUFvQixXQUFVLEdBRDRCQyxFQUFBQyxlQUFBSCxFQUFBLEdBQy9ESSxFQUQrREYsRUFBQSxHQUNyRE4sRUFEcURNLEVBQUEsR0F5QmhFVCxFQUE2QixTQUFDWSxHQUNsQyxNQUFnQixjQUFaQSxFQUFnQ0MsS0FBS0MsSUFBSUgsRUFBVyxFQUFHTCxFQUFhLEdBQ3hELFlBQVpNLEVBQThCQyxLQUFLRSxJQUFJSixFQUFXLEVBQUcsR0FLbERBLEdBMkJULE9BeEJBLEVBQUF2QixPQUFBNEIsV0FBVSxXQUNSLEdBQUlYLEVBQUlZLFVBQ05aLEVBQUlZLFFBQVFDLGlCQUFpQixVQUFXMUIsR0FDeENhLEVBQUlZLFFBQVFDLGlCQUFpQixRQUFTZCxHQUlsQ1QsR0FDRixJQUFLLElBQUl3QixFQUFJLEVBQUdBLEVBQUlkLEVBQUlZLFFBQVFHLFdBQVdDLE9BQVFGLElBQUssQ0FDdEQsSUFBTUcsRUFBUWpCLEVBQUlZLFFBQVFHLFdBQVdELEdBQ3JDLEdBQTJCLG1CQUFoQkcsRUFBTUMsTUFBc0IsQ0FDckNELEVBQU1DLFFBQ04sT0FNUixPQUFPLFdBQ0xsQixFQUFJWSxRQUFRTyxvQkFBb0IsVUFBV2hDLEdBQzNDYSxFQUFJWSxRQUFRTyxvQkFBb0IsUUFBU3BCLE1BSXRDLENBQUVPLFNBQUFBLEVBQVVSLFlBQUFBLEdBR3JCc0IsT0FBT0MsUUFBVXBDIiwiZmlsZSI6Imhvb2tzL3VzZUtleUNvbnRyb2xsZWRNZW51LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmZ1bmN0aW9uIHVzZUtleUNvbnRyb2xsZWRNZW51KHsgcmVmLCBtZW51TGVuZ3RoLCB2aXNpYmxlLCBzZXRWaXNpYmxlIH0pIHtcbiAgY29uc3QgW2ZvY3VzSWR4LCBzZXRGb2N1c0lkeF0gPSB1c2VTdGF0ZSgtMSk7XG5cbiAgY29uc3Qgb25LZXlEb3duID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdUYWInICYmIHZpc2libGUpIHtcbiAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoWydBcnJvd0Rvd24nLCAnICddLmluZGV4T2YoZS5rZXkpID4gLTEgJiYgIXZpc2libGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gVE9ETzogd2h5IGlzIHRoaXMgbmVjZXNzYXJ5P1xuICAgICAgc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFsnQXJyb3dEb3duJywgJ0Fycm93VXAnLCAnRW50ZXInLCAnICddLmluZGV4T2YoZS5rZXkpID4gLTEpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCB0ZXN0ID0gZ2V0Rm9jdXNJbmRleEFmdGVyS2V5UHJlc3MoZS5rZXkpO1xuICAgICAgY29uc29sZS5sb2codGVzdCk7XG4gICAgICBzZXRGb2N1c0lkeCh0ZXN0KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25LZXlVcCA9IChlKSA9PiB7XG4gICAgaWYgKFsnRW50ZXInLCAnICddLmluZGV4T2YoZS5rZXkpID4gLTEpIHtcbiAgICAgIC8vIHNlbGVjdCB0aGUgb3B0aW9uPz8/P1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRGb2N1c0luZGV4QWZ0ZXJLZXlQcmVzcyA9IChrZXlOYW1lKSA9PiB7XG4gICAgaWYgKGtleU5hbWUgPT09ICdBcnJvd0Rvd24nKSByZXR1cm4gTWF0aC5taW4oZm9jdXNJZHggKyAxLCBtZW51TGVuZ3RoIC0gMSk7XG4gICAgaWYgKGtleU5hbWUgPT09ICdBcnJvd1VwJykgcmV0dXJuIE1hdGgubWF4KGZvY3VzSWR4IC0gMSwgMCk7XG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51TGVuZ3RoOyBpKyspIHtcbiAgICAvLyAgIGNvbnN0IG9wdGlvbiA9IHRoaXMucHJvcHMub3B0aW9uc1tpXTtcbiAgICAvLyAgIGlmIChvcHRpb24udGV4dCAmJiBvcHRpb24udGV4dFswXS50b0xvd2VyQ2FzZSgpID09PSBrZXlOYW1lKSByZXR1cm4gaTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIGZvY3VzSWR4O1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgICByZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duKTtcbiAgICAgIHJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcCk7XG4gICAgICAvLyByZWYgaXMgdG8gdGhlIGxpIGl0ZW0gdGhhdCBjb250YWlucyB0aGUgZHJvcGRvd24gZWxlbWVudHNcbiAgICAgIC8vIHNlYXJjaCBmb3IgYSBmb2N1c2FibGUgY2hpbGRcbiAgICAgIC8vIChwYXJ0aWN1bGFybHkgaW1wb3J0YW50IGZvciBjdXN0b20gZWxlbWVudHMpXG4gICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlZi5jdXJyZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IHJlZi5jdXJyZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZC5mb2N1cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWYuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duKTtcbiAgICAgIHJlZi5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBmb2N1c0lkeCwgc2V0Rm9jdXNJZHggfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VLZXlDb250cm9sbGVkTWVudTtcbiJdfQ==
